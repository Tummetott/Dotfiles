# vim: set ft=bash:

if ! has zsh; then
    {{ if eq .chezmoi.os "darwin" }}
    info 'Install zsh'
    {
        brew update
        brew install zsh
    } >> "$BOOTSTRAP_LOG_FILE" 2>&1

    {{ else if and (eq .chezmoi.os "linux") (or
        (eq .chezmoi.osRelease.id "ubuntu")
        (eq .chezmoi.osRelease.id "pop")
        (eq .chezmoi.osRelease.id "kali")) }}
    info 'Install zsh'
    {
        sudo apt -y update
        sudo apt -y install zsh
    } >> "$BOOTSTRAP_LOG_FILE" 2>&1

    {{ else }}
    error 'No installation instructions are available to install zsh'
    {{ end }}
fi

if echo "$SHELL" | grep -q 'zsh'; then
    info 'Set zsh as default shell'
    sudo chsh -s "$(which zsh)" "$USER"
fi
